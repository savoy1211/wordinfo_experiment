<!DOCTYPE html>
<html>
	<head>
		<title>My experiment</title>
		<script src="jspsych-6.1.0/jspsych.js"></script>
		<script src="jspsych-6.1.0/plugins/jspsych-survey-text.js"></script>
		<script src="jspsych-6.1.0/plugins/jspsych-html-keyboard-response.js"></script>
		<script src="jspsych-6.1.0/plugins/jspsych-cloze.js"></script>
		<script src="jspsych-6.1.0/plugins/jspsych-cloze-blank.js"></script>
		<script src="jspsych-6.1.0/plugins/jspsych-animation.js"></script>
		<script src="https://proliferate.alps.science/static/js/proliferate.js" type="text/javascript"></script>
		<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
		<link href="jspsych-6.1.0/css/jspsych.css" rel="stylesheet" type="text/css"></link>
		<link href="jspsych-6.1.0/css/animation.css" rel="stylesheet" type="text/css"></link>
	</head>
	<body>
	</body>
	<script>
		
		// The timeline array contains the set of trials we want to run in the experiment
		var timeline = [];	

		var legal = {
			type: 'html-keyboard-response',
			stimulus: '<p>University of California, Irvine Language Processing Group</p>'+
    		'<p id="legal">Met het beantwoorden van de volgende vragen neem je deel aan een studie die wordt uitgevoerd door onderzoekers van de University of California, Irvine Department of Language Science. Mocht u vragen hebben over dit onderzoek, dan kunt u deze vragen stellen via email aan Richard Futrell op rfutrell@uci.edu of aan Ryan Lee op leerk3@uci.edu. Je moet minimaal 18 jaar oud zijn om deel te nemen aan deze studie. Je deelname is geheel vrijwillig. Je hebt het recht om enkele of alle vragen in deze studie weigeren te beantwoorden. Je hebt het recht om op ieder moment tijdens de studie verdere deelname te weigeren zonder nadelige gevolgen. Je anoniemiteit is verzekerd; de onderzoekers die jou hebben gevraagd voor deelname aan het onderzoek ontvangen geen persoonlijke informatie over jou. </p>' +
    		'<p>Druk op de spatiebalk om te beginnen</p>'
		};
		timeline.push(legal)

		// Define welcome message trial
		var welcome = {
			type: 'html-keyboard-response',
			stimulus: 'Welkom bij het experiment.'
		};
		timeline.push(welcome);


		// Define instructions trial
		var instructions = {
		  type: "html-keyboard-response",
		  stimulus: 
		  	  "<p>Je krijgt een reeks van vijf woorden uit een zin in een willekeurige volgorde.</p>"+
		  	  "<p>Het is jouw taak om de woorden te herschikken in de volgorde van de oorspronkelijke zin</p>" +
		  	  "<p>Echter, je krijgt de oorspronkelijke zin niet te zien.</p>"+
		      "<p>Bijvoorbeeld:</p>" +
		      // '<img src="jspsych-6.1.0/css/img/opening_example.gif" width="780"></img>'+
		      "<video width='852' height='480' controls><source src='DUTCH_video1.mp4' type='video/mp4'></video>"+
		      "<p>Druk op de spatiebalk om verder te gaan met de instructies. </p>",
	      // post_trial_gap: 2000
		};
		timeline.push(instructions);

		// Define notes trial
		var notes = {
		  type: "html-keyboard-response",
		  stimulus: "<p>Let op twee dingen:</p>" +
		      "<p>1. De vijf woorden kunnen zijn geselecteerd vanaf elk punt in de zin. </p>" +
		      "<video width='852' height='480' controls><source src='DUTCH_video2-1.mp4' type='video/mp4'></video>"+
		      "<p>2. Wanneer je meerdere mogelijkheden ziet, kies je er gewoon één.</p>" +
		      "<video width='852' height='480' controls><source src='note2_example_final.mp4' type='video/mp4'></video>"+
		      "<p>Je krijgt de opties om de woorden opnieuw te schudden en om je ingevoerde antwoord te wissen.</p>"+
		      "<p>Druk op de spatiebalk om verder te gaan met de instructies.</p>",
	      // post_trial_gap: 1000
		};
		timeline.push(notes);

		// Define notes trial
		var bonus = {
		  type: "html-keyboard-response",
		  stimulus: "<p>Je krijgt een bonus als het je lukt om de oorspronkelijke volgorde te vinden voor alle woordreeksen.</p>" +
		      "<p>Succes! </p>" +
		      "<p>Druk op de spatiebalk om te beginnen.</p>",
	      // post_trial_gap: 1000
		};
		timeline.push(bonus);

		var sentence_dict = {'op,een,afstand,van,vijftien': 'Maar dit meer bevond zich nog op een afstand van vijftien kilometers, en wij moesten opgeven het voor den nacht te bereiken.', 'dat,zij,in,het,geheel': 'Het toeval, louter het toeval bragt hen terug op dat schip, dat zij in het geheel niet verwacht hadden weer te zien!','van,tijd,tot,tijd,met': 'Den 27sten Februari 1854 lagen twee mannen aan den voet van een ontzaglijken treurwilg met elkander te praten en keken van tijd tot tijd met de grootste oplettendheid naar den stroom.','in,plaats,van,een,der': 'Ik bleef den geheelen nacht op het dek, in plaats van een der lieden te wekken, om mij af te lossen; en niets bragt mijn gemoed tot bedaren, dan het plegtige besluit dat ik opvatte, om in den wil van God te berusten, en met dankbaarheid, indien ik kon, of toch met onderwerping aan te nemen, wat Hij beslissen mogt, dat mijn lot moest wezen.','op,de,deur,van,de': 'Onder het drinken van eenige glazen brandewijn en het rooken van cigaren wordt er eene proclamatie in den vorm opgemaakt, die de gevlugte Prue aanmaant terug te keeren, en den Sheriff van de County gelast, zulk eene magt met zich te nemen, als hij noodig oordeelt voor het zoeken en vervolgen der gevlugte, welke proclamatie, tot Prue\'s onderrigting, plegtig wordt aangeplakt op de deur van de geregtszaal, en "op zulke andere plaatsen als gezegde regterlijke ambtenaren zullen goedkeuren.','dat,hij,zich,niet,had': 'Toen men echter van alle kanten begon te vragen en te dringen, bekende hij eindelijk, dat hij zich niet had kunnen vereenigen met de gedachte, misschien jaren lang zijne geliefde bergtochten te moeten ontberen.','en,het,volk,in,het': 'Mijn zachtzinnigheid en goed gedrag hadden zulk een goeden indruk op den Keizer en zijn hof, ja ik mag wel zeggen op het leger en het volk in het algemeen gemaakt, dat ik de hoop ging koesteren binnenkort in vrijheid te worden gesteld.','nog,in,handen,van,de': 'Misschien, als hij nog in handen van de Indianen is.','een,laatsten,blik,op,de': 'Nu werpt hij een laatsten blik op de kolonies, die op\'t punt staan te verstijven.','op,dezelfde,wijze,waarop,zij': 'Op dezelfde wijze, waarop zij te werk is gegaan, zou het niet moeijelijk zijn een geducht argument zamen te stellen tegen de betrekking tusschen echtgenooten onderling, of tusschen ouders en hunne kinderen, of voogden en pupillen; want duizende vrouwen en kinderen en pupillen zijn mishandeld ja zelfs vermoord geworden.','dat,zal,ik,wel,doen': '"Dat zal ik wel doen," zeide Wilson.','in,de,vallei,waar,de': 'De jager en de astronoom staken een stok door de samengebonden pooten van het dier en laadden het op hunne schouders; zij verlieten den waterval en kwamen een halfuur daarna aan hun kamp in de vallei, waar de wagen door twee Boschjesmannen bewaakt werd.','van,den,weg,een,scherpe': 'En op hetzelfde oogenblik weerklonk links van den weg een scherpe, zeer vreemde kreet.','ik,geen,reden,waarom,ik': 'Ik zeide Zijne Majesteit, dat ik, ingevolge mijn belofte, gekomen was, en met verlof van den Keizer, mijn meester, om de eer te hebben een zoo machtigen vorst te zien, en hem de diensten aan te bieden die in mijn macht waren en niet strijdig met mijn plicht tegenover mijn eigen vorst; maar van mijn ongenade sprak ik geen woord, omdat ik tot dat oogenblik geen officieele kennisgeving er van gehad had en mij zelf beschouwen moest als heelemaal onbekend met zoo\'n soort plan; ook zag ik geen reden waarom ik den Keizer het geheim zou openbaren, terwijl ik buiten zijn bereik was; maar daarin bleek mij spoedig dat ik me had vergist.','gij,niet,in,zulk,een': 'En moet gij niet, in zulk een geval, Hem eere geven en dankbaar zijn, dat Hij u liever in dit leven voor uwe boosheid wilde straffen, dan uwe ziel daarvoor verderven in het volgende leven?','uw,ziel,is,nog,niet': 'Uw ziel is nog nietrijp.','laatsten,dag,van,mijn,leven': '"Met een gezigt vol van den grootsten ernst, antwoordde zij: "Welmevrouw, de Heer Jezus kwam en sprak tegen mij, weet ge; en nooit,tot op den laatsten dag van mijn leven, zal ik vergeten wat Hij tegenmij zeide.','zij,en,hare,kinderen,vrij': 'Zijne moeder was eene fraaije quadrone, de dochter van haren meesteren door hem ten huwelijk gegeven aan eenen vrijen blanke, een Schot,met uitdrukkelijke afspraak, dat zij en hare kinderen vrij zoudenzijn.','zijn,en,dan,telkens,weer': 'Maarzóó dicht bij de vervulling van een lang gekoesterden wensch te zijnen dan telkens weer zijn geduld op de proef te zien gesteld, is dantoch ook bijna niet te dragen.','en,vreeselijk,om,aan,te': 'Zij waren van reusachtige grootte,in dierenvellen gehuld en vreeselijk om aan te zien.','zich,in,nog,digter,rookwolken': 'Toen Mac Nabbs alleen gebleven was, praatte hij ouder gewoonte in zichzelven, maar zonder zich ooit tegen te spreken, terwijl hij zich in nogdigter rookwolken hulde; hij bleef stokstijf staan en keek op hetachterschip naar het zog van het jagt.','waar,de,noordelijken,mij,niet': 'Geen enkel Engelsch schip is nog tot dievaarwaters doorgedrongen, behalve de Bermuda, die zal ik navolgen,en als mijn schip weinig diepgang heeft, ga \'k waar de Noordelijkenmij niet kunnen volgen.','een,hooger,standpunt,dan,we': 'Vanzeker oogpunt bezien hebben wij hier een proef op de som met betrekkingtot het meest onberekenbaar deel van ons wezen; we hebben hier te doenmet de lotgevallen van zich opvolgende geslachten, die wij kunnenoverzien van een hooger standpunt dan we ooit bereiken bij debeschouwing van de lotgevallen der menschen.','gij,mij,onverdiend,schande,gij': 'Deedt gij mij, onverdiend,schande--gij zoudt menigen goeden vriend verliezen.','af,en,elegast,reed,vooruit': 'De Koning steeg aanstonds af, en Elegast reedvooruit op den weg, dien hij had aangewezen.','capsarii,in,het,frigidarium,of': 'Langs den oever van de rivier, die zich strekte als een eindeloosuitgeplette reep blik, op het strand dat naar de zon duiddede alseen lange vieil-or-kleurig-gehandschoende voorvinger, promeneerden dematronae in stola en palla, de meritrices in palla en stola, stroomdenzij uit de Thermen, nog na-boudeerend over de duurte van de tesserae,die zij betaald hadden aan de ostiari, en de patriciërs, nog mopperendover de foia die zij volgens de mos hadden moeten aanbieden aan decapsarii in het frigidarium of het nog prijziger tepidarium, waarzij hun corpus hadden gebaad en geodorificeerd.','koppeltjes,in,het,straatje,staan': 'Lang nog bleven de andere zusters met koppeltjes in het straatje staan,geheimzinnig besprekend het mirakel van den dag.','honingkelken,en,de,geheime,gangen': 'In de doolhoven der honingkelken en degeheime gangen der helmknopjes moet ze den verborgen honing en \'tstuifmeel opsporen.','grylli,devastatorii,van,de,natuurkundigen': 'Deze dieren, de grylli devastatorii van de natuurkundigen,kwamen bij millioenen.','rousell,in,de,soto,te': 'Alsmede--terzelfder tijd nog gevangen gezet een neger, zich Claiborne noemende, zwart van kleur, 22 jaar oud, omtrent 140 pond zwaar, 5 voet lang, geen likteekens te zien; hij geeft voor aan kolonel Rousell, in de Soto te behooren.'}		
		var likely_1 = [['op', 'een', 'afstand', 'van', 'vijftien'], ['dat', 'zij', 'in', 'het', 'geheel'], ['van', 'tijd', 'tot', 'tijd', 'met'], ['in', 'plaats', 'van', 'een', 'der'], ['op', 'de', 'deur', 'van', 'de']]
		var likely_2 = [['dat', 'hij', 'zich', 'niet', 'had'], ['en', 'het', 'volk', 'in', 'het'], ['nog', 'in', 'handen', 'van', 'de'], ['een', 'laatsten', 'blik', 'op', 'de'], ['op', 'dezelfde', 'wijze', 'waarop', 'zij']]
		var likely_3 = [['dat', 'zal', 'ik', 'wel', 'doen'], ['in', 'de', 'vallei', 'waar', 'de'], ['van', 'den', 'weg', 'een', 'scherpe'], ['ik', 'geen', 'reden', 'waarom', 'ik'], ['gij', 'niet', 'in', 'zulk', 'een']]
		var likely_4 = [['uw', 'ziel', 'is', 'nog', 'niet'], ['laatsten', 'dag', 'van', 'mijn', 'leven'], ['zij', 'en', 'hare', 'kinderen', 'vrij'], ['zijn', 'en', 'dan', 'telkens', 'weer'], ['en', 'vreeselijk', 'om', 'aan', 'te']]
		var likely_5 = [['zich', 'in', 'nog', 'digter', 'rookwolken'], ['waar', 'de', 'noordelijken', 'mij', 'niet'], ['een', 'hooger', 'standpunt', 'dan', 'we'], ['gij', 'mij', 'onverdiend', 'schande', 'gij'], ['af', 'en', 'elegast', 'reed', 'vooruit']]
		var likely_6 = [['capsarii', 'in', 'het', 'frigidarium', 'of'], ['koppeltjes', 'in', 'het', 'straatje', 'staan'], ['honingkelken', 'en', 'de', 'geheime', 'gangen'], ['grylli', 'devastatorii', 'van', 'de', 'natuurkundigen'], ['rousell', 'in', 'de', 'soto', 'te']]

		// // most_likely_pre.splice(0,10)
		// mid_likely_pre.splice(0,10)
		// least_likely_pre.splice(0,10)

		function shuffle(array) {
		  var currentIndex = array.length, temporaryValue, randomIndex;

		  // While there remain elements to shuffle...
		  while (0 !== currentIndex) {

		    // Pick a remaining element...
		    randomIndex = Math.floor(Math.random() * currentIndex);
		    currentIndex -= 1;

		    // And swap it with the current element.
		    temporaryValue = array[currentIndex];
		    array[currentIndex] = array[randomIndex];
		    array[randomIndex] = temporaryValue;
		  }

		  return array;
		}

		function get_trial_text(ordered, shuffled) {
			var random_words_string = shuffled.join(' </a><a>');
			var random_words_string = '<a>' + random_words_string + ' </a>'
			var output_1 = '<p id=\'word-choices\'>'+random_words_string+"</p>"
			var output_2 = "<p>"
			ordered.forEach(function(each){
				output_2 += "%" + each + "%"
			})
			output_2 += '</p><button class=\'randomize\'>Woordvolgorde herschudden </button><button class=\'clear\'>Wissen</button>'
			return output_1+output_2
		}		

		function fill_array(fill_from) {
			final_array = []
			fill_from.forEach(function(each){
				ordered = each.slice()
				shuffled = shuffle(each)
				final_array.push({'text': get_trial_text(ordered, shuffled)})
			})
			return final_array
		}

		likely_1 = fill_array(likely_1)
		likely_2 = fill_array(likely_2)
		likely_3 = fill_array(likely_3)
		likely_4 = fill_array(likely_4)
		likely_5 = fill_array(likely_5)
		likely_6 = fill_array(likely_6)
		shuffle(likely_1)
		shuffle(likely_2)
		shuffle(likely_3)
		shuffle(likely_4)
		shuffle(likely_5)
		shuffle(likely_6)

		// likely_1 = likely_1.slice(0,5)
		// likely_2 = likely_2.slice(0,5)
		// likely_3 = likely_3.slice(0,5)
		// likely_4 = likely_4.slice(0,5)
		// likely_5 = likely_5.slice(0,5)
		// likely_6 = likely_6.slice(0,5)

		var test_stimuli = []
		var first_set = likely_1.slice(0,3)
		// var test_stimuli = likely_1.slice(0,3)
		var pre_remaining_set = likely_1.slice(3).concat(likely_2).concat(likely_3).concat(likely_4).concat(likely_5).concat(likely_6)
		var pre_remaining_set = most_likely.concat(mid_likely).concat(least_likely)
		shuffle(pre_remaining_set)
		var remaining_set = pre_remaining_set
		// test_stimuli = test_stimuli.concat(first_set)
		test_stimuli = test_stimuli.concat(remaining_set)

		var fixation = {
		  type: 'html-keyboard-response',
		  stimulus: function(){
			var images = document.getElementsByTagName('img');
			var l = images.length;
			for (var i = 0; i < l; i++) {
			    images[0].parentNode.removeChild(images[0]);
			}
		    var last_trial_correct = jsPsych.data.getLastTrialData();
		    var key = jsPsych.data.getLastTrialData().values()[0].solution.toString()
		    var response = jsPsych.data.getLastTrialData().values()[0].response.toString()
		  	if(last_trial_correct.values()[0].correct){
		  		return '<img src="correct.png" width=100</img><h2>Juist!</h2><h4>Je antwoord was: </h4><p>'+response+'</p><h4>Dit is de oorspronkelijke zin: </h4><p>'+sentence_dict[key]+'</p><p style="font-size:11px;">(Deze zin is uit een tekst van Project Gutenberg gehaald)</p><p style="font-size:11px;">Druk op de spatiebalk.</p>'
		  	} else{
		  		return '<h2>Onjuist.</h2><h4>Je antwoord was: </h4><p>'+response+'</p><h4>Dit is het juiste antwoord en de oorspronkelijke zin:</h4><p>'+key+'</p><p>'+sentence_dict[key]+'</p><p style="font-size:11px;">(Deze zin is uit een tekst van Project Gutenberg gehaald)</p><p style="font-size:11px;">Druk op de spatiebalk.</p>'
		  		// return '<p>Wrong.</p><p>Here was the original sentence:</p><p></p><p>Press any key to continue.</p>'

		  	}
		  },
		  choices: [' '],
	      trial_duration: function(){
		    var last_trial_correct = jsPsych.data.getLastTrialData();
		  	if(last_trial_correct.values()[0].correct){
		  		return 60000
		  	} else{
		  		return 60000
		  	}
		  },
	      data: {test_part: 'fixation'}
		};
		
		var trial = {
		    type: 'cloze',
		    text: jsPsych.timelineVariable('text'),
		    check_answers: true,
		    button_text: 'Volgende',
		    on_load: function(trial){
			    var isTesting = document.getElementsByClassName('cloze');
			    var inputs = isTesting[0].childNodes[1].childNodes
			    var words = isTesting[0].childNodes[0].childNodes
			    var words_copy = words
			    var words_array = []
			    words.forEach(word => words_array.push(word.text.trim()))
			    isTesting[0].childNodes[1].childNodes.forEach(inputBox => inputBox.addEventListener('keyup',isMatch))
			    isTesting[0].childNodes[2].addEventListener('click', randomize)
			    isTesting[0].childNodes[3].addEventListener('click', clear)

			    function isMatch(e) {
			    	text_input = e.target.value
			    	var line_through = 0
					//console.log("text_input: "+text_input)
			    	if (words_array.includes(text_input)) {
			    		try{
			    			//console.log("words_array: "+words_array.toString());
			    			;
			    			var occurence = 0;
			    			words_array.forEach(word => (text_input == word ? occurence++ : ''));
			    			(occurence > 1 ? (words[words_array.indexOf(text_input)].style.textDecoration=="line-through" ? words[words_array.indexOf(text_input, words_array.indexOf(text_input)+1)].style.textDecoration="line-through" : words[words_array.indexOf(text_input)].style.textDecoration="line-through") : words[words_array.indexOf(text_input)].style.textDecoration="line-through");
			    			
			    		} catch(e){
			    			//console.log(e)
			    		}
			    	} else {
			    		input_match = []
			    		input_nonmatch = words_array.slice()
			    		inputs.forEach(function(input) {
			    			(words_array.includes(input.value.trim()) ? input_match.push(input.value.trim()) : '');
			    			input_match.forEach(match => input_nonmatch.splice(input_nonmatch.indexOf(match)))
			    			input_match.forEach(match => words[words_array.indexOf(match)].style.textDecoration="line-through")
			    			input_nonmatch.forEach(nonmatch => words[words_array.indexOf(nonmatch)].style.textDecoration="none")
			    		});
			    	}
			    }

			    function randomize(e) {
					for (i = isTesting[0].childNodes[0].childNodes.length; i >= 0; i--) {
					    isTesting[0].childNodes[0].appendChild(isTesting[0].childNodes[0].children[Math.random() * i | 0]);
					}
				    words = isTesting[0].childNodes[0].childNodes
				    words_copy = words
				    words_array = []
				    words.forEach(word => words_array.push(word.text.substring(0,word.text.length-1)))
			    }

			    function clear(e) {
			    	isTesting[0].childNodes[1].childNodes.forEach(inputBox => inputBox.value = "")
				    input_nonmatch = words_array.slice()
				    input_nonmatch.forEach(nonmatch => words[words_array.indexOf(nonmatch)].style.textDecoration="none")
			    }
		    }

		};
		var test_procedure = {
		  timeline: [ trial, fixation],
		  timeline_variables: test_stimuli,
		  randomize_order: false,
		  repetitions: 1
		};
		timeline.push(test_procedure);

		var debrief_block = {
		  type: "html-keyboard-response",
		  stimulus: function() {

		    var trials = jsPsych.data.get().filter({test_part: 'test'});
		    var correct_trials = trials.filter({correct: true});
		    var accuracy = Math.round(correct_trials.count() / trials.count() * 100);
		    var rt = Math.round(correct_trials.select('time_elapsed').mean())/1000;

		    return "<p>Je hebt "+accuracy+"% van de woordreeksen juist herschikt.</p>"+
		    "<p>Desondanks hebben we besloten je alsnog de bonus toe te kennen. Gefeliciteerd!</p>"+
		    "<img src='star.gif'></img>"+
		    "<p>Druk op de spatiebalk.</p>";

		  }
		};
		timeline.push(debrief_block);

		var survey = {
 			type: 'cloze-blank',
		    text: '<p>Let er op dat je op ‘versturen’ klikt om het experiment te beëindigen. </p>'+
		  '<p class="info">Het beantwoorden van deze vragen is optioneel maar zal ons helpen je antwoorden beter te begrijpen. </p>'+  
	      '<p>Heb je de instructies gelezen en denk je dat je het experiment correct hebt uitgevoerd?'+
	      	  '<select id="understanding">'+
	          '<label><option value=""/></label>'+
	          '<label><option value="No"/>Nee</label>'+
	          '<label><option value="Yes"/>Ja</label>'+
	          '<label><option value="Confused"/>ik was in de war</label>'+
	          '</select>'+
	      '</p>'+
	      '<p>Geslacht: '+
	        '<select id="gender">'+
	          '<label><option value=""/></label>'+
	          '<label><option value="Male">Man</label>'+
	          '<label><option value="Female"/>Vrouw</label>'+
	          '<label><option value="Other"/>Anders</label>'+
	        '</select>'+
	      '</p>'+
	      '<p>Leeftijd: <input type="text" id="age"/></p>'+
	      '<p>Hoogst behaalde opleidingsniveau: '+
	        '<select id="education">'+
	          '<label><option value="-1"/></label>'+
	          '<label><option value="0"/>Middelbare school onvoltooid</label>'+
	          '<label><option value="1"/>Middelbare school</label>'+
	          '<label><option value="2"/>MBO</label>'+
	          '<label><option value="3"/>HBO/Bachelor</label>'+
	          '<label><option value="4"/>Master, PhD</label>'+
	        '</select>'+
	      '</p>'+
	      '<p>Moedertaal: <input type="text" id="language"/></p>'+
	      '<label> (de taal/talen die je als kind thuis sprak.)</label>'+
	     ' <p>Vond je het een leuk experiment?</p>'+
	      '<select id="enjoyment">'+
	       ' <label><option value="-1"></option></label>'+
	        '<label><option value="0">Minder leuk dan het gemiddelde experiment</option></label>'+
	        '<label><option value="1" >Een gemiddeld experiment</option></label>'+
	        '<label><option value="2">Leuker dan het gemiddelde experiment</option></label>'+
	      '</select>'+
	      '<p>We zijn erg geinteresseerd in wat je van het experiment vond. Schrijf hier eventuele verdere opmerkingen:</p>'+
	      '<textarea id="comments" rows="3" cols="50"></textarea>'+
	      '<br/>'
	      ,
		    check_answers: false,
		    button_text: 'Submit',
		};
		timeline.push(survey);


		// let ppn = jsPsych.data.urlVariables()['ppn']
		let ppn = jsPsych.data.urlVariables()
		// call the saveData function after the experiment is over
		jsPsych.init({
	       timeline: timeline,
		   // code to define the experiment structure would go here...
            on_finish: function (data) {  
            	console.log(data.values())  
            	proliferate.submit({"trials": data.values(), "participant_id": ppn['participant_id'], "experiment_id": ppn['experiment_id']});
                document.body.innerHTML = '<p>Een moment alstublieft, u wordt zo snel mogelijk doorgestuurd naar Prolific. </p>'
                // window.location.assign("")
                setTimeout(function () { location.href = "https://app.prolific.co/submissions/complete?cc=4B1CD1C5" }, 3000)
            }
		});

	</script>
</html>
